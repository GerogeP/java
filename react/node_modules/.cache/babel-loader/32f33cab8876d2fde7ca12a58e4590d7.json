{"ast":null,"code":"var _jsxFileName = \"/Users/panglili/study-react/src/FileObjects/DragAndDrop.tsx\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DragAndDrop = props => {\n  const {\n    data,\n    dispatch\n  } = props;\n\n  const handleDragEnter = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch({\n      type: 'SET_DROP_DEPTH',\n      dropDepth: data.dropDepth + 1\n    });\n  };\n\n  const handleDragLeave = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch({\n      type: 'SET_DROP_DEPTH',\n      dropDepth: data.dropDepth - 1\n    });\n    if (data.dropDepth > 0) return;\n    dispatch({\n      type: 'SET_IN_DROP_ZONE',\n      inDropZone: false\n    });\n  };\n\n  const handleDragOver = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.dataTransfer.dropEffect = 'copy';\n    dispatch({\n      type: 'SET_IN_DROP_ZONE',\n      inDropZone: true\n    });\n  };\n\n  const handleDrop = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    console.log('event : ', event); // console.log('event.target : ', event.target);\n\n    console.log('event.dataTransfer : ', event.dataTransfer);\n    console.log('event.dataTransfer.item : ', event.dataTransfer.item);\n    console.log('event.dataTransfer.type : ', event.dataTransfer.type);\n    console.log('event.dataTransfer.files : ', event.dataTransfer.files);\n    let files = [...event.dataTransfer.files];\n\n    if (files && files.length > 0) {\n      const existingFiles = data.fileList.map(f => f.path + f.name);\n      files = files.filter(f => !existingFiles.includes(f.name));\n      dispatch({\n        type: 'ADD_FILE_TO_LIST',\n        files\n      });\n      event.dataTransfer.clearData();\n      dispatch({\n        type: 'SET_DROP_DEPTH',\n        dropDepth: 0\n      });\n      dispatch({\n        type: 'SET_IN_DROP_ZONE',\n        inDropZone: false\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: data.inDropZone ? 'drag-drop-zone inside-drag-area' : 'drag-drop-zone',\n    onDrop: event => handleDrop(event),\n    onDragOver: event => handleDragOver(event),\n    onDragEnter: event => handleDragEnter(event),\n    onDragLeave: event => handleDragLeave(event),\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Drag files here to upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_c = DragAndDrop;\nexport default DragAndDrop;\n\nvar _c;\n\n$RefreshReg$(_c, \"DragAndDrop\");","map":{"version":3,"names":["React","DragAndDrop","props","data","dispatch","handleDragEnter","event","preventDefault","stopPropagation","type","dropDepth","handleDragLeave","inDropZone","handleDragOver","dataTransfer","dropEffect","handleDrop","console","log","item","files","length","existingFiles","fileList","map","f","path","name","filter","includes","clearData"],"sources":["/Users/panglili/study-react/src/FileObjects/DragAndDrop.tsx"],"sourcesContent":["import React from 'react';\n\nconst DragAndDrop = ((props: any) => {\n  const { data, dispatch } = props;\n\n  const handleDragEnter = ((event: any) => {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch({ type: 'SET_DROP_DEPTH', dropDepth: data.dropDepth + 1 });\n  });\n\n  const handleDragLeave = ((event: any) => {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch({ type: 'SET_DROP_DEPTH', dropDepth: data.dropDepth - 1 });\n    if (data.dropDepth > 0) return\n    dispatch({ type: 'SET_IN_DROP_ZONE', inDropZone: false })\n  });\n\n  const handleDragOver = ((event: any) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.dataTransfer.dropEffect = 'copy';\n    dispatch({ type: 'SET_IN_DROP_ZONE', inDropZone: true });\n  });\n\n  const handleDrop = ((event: any) => {\n    event.preventDefault();\n    event.stopPropagation();\n    console.log('event : ', event);\n    // console.log('event.target : ', event.target);\n    console.log('event.dataTransfer : ', event.dataTransfer);\n    console.log('event.dataTransfer.item : ', event.dataTransfer.item);\n    console.log('event.dataTransfer.type : ', event.dataTransfer.type);\n    console.log('event.dataTransfer.files : ', event.dataTransfer.files);\n\n    let files = [...event.dataTransfer.files];\n\n    if (files && files.length > 0) {\n      const existingFiles = data.fileList.map((f: any) => f.path + f.name)\n      files = files.filter(f => !existingFiles.includes(f.name))\n\n      dispatch({ type: 'ADD_FILE_TO_LIST', files });\n      event.dataTransfer.clearData();\n      dispatch({ type: 'SET_DROP_DEPTH', dropDepth: 0 });\n      dispatch({ type: 'SET_IN_DROP_ZONE', inDropZone: false });\n    }\n  });\n\n\n\n\n  return (\n    <div\n      className={data.inDropZone ? 'drag-drop-zone inside-drag-area' : 'drag-drop-zone'}\n      onDrop={event => handleDrop(event)}\n      onDragOver={event => handleDragOver(event)}\n      onDragEnter={event => handleDragEnter(event)}\n      onDragLeave={event => handleDragLeave(event)}\n    >\n      <p>Drag files here to upload</p>\n    </div>\n  );\n});\n\nexport default DragAndDrop;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}